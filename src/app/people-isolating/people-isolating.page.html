<ion-header>
  <ion-toolbar class="max-wrap">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Volunteers</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onSignout()">Sign out</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="max-wrap">



    <ion-card *ngIf="(isolators$ | async)?.length">
      <ion-card-header>
        <ion-card-title>By county</ion-card-title>
        <ion-card-subtitle>Self-isolation requests grouped by county</ion-card-subtitle>
      </ion-card-header>
      <ion-list>
        <ng-container
          *ngFor="let isolator of (isolators$ | async) | groupBy: 'details.county' | orderBy: 'dateSubmitted' | keyvalue"
        >
          <ion-item
            detail="true"
            lines="full"
            [routerLink]="['/people-isolating-grouped']"
            [queryParams]="{county: isolator.value[0].details.county}"
          >
            <ion-label>
              {{isolator.value[0].details.county}}
            </ion-label>

            <ion-badge color="danger">{{isolator.value.length}}</ion-badge>
          </ion-item>
        </ng-container>
      </ion-list>
    </ion-card>


    <ion-card *ngIf="(isolators$ | async)?.length">
      <ion-card-header>
        <ion-card-title>By location</ion-card-title>
        <ion-card-subtitle>Self-isolation requests grouped by volunteer-led specific regions</ion-card-subtitle>
      </ion-card-header>
      <ion-list>
        <ng-container
                *ngFor="let isolator of (isolators$ | async) | groupBy: 'details.location' | orderBy: 'dateSubmitted' | keyvalue"
        >
          <ion-item
                  detail="true"
                  lines="full"
                  [routerLink]="['/people-isolating-grouped']"
                  [queryParams]="{location: isolator.value[0].details.location}"
          >
            <ion-label>
              {{isolator.value[0].details.location}}
            </ion-label>

            <ion-badge color="danger">{{isolator.value.length}}</ion-badge>
          </ion-item>
        </ng-container>
      </ion-list>
    </ion-card>
  </div>
</ion-content>
